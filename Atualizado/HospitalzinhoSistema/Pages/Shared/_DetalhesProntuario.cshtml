@using HospitalzinhoSistema.Models.Paciente
@model PacienteDTO

@if (Model != null)
{
    <div id="sugestoes-cpf" hx-swap-oob="innerHTML"></div>

    <input type="text" id="cpf-paciente" name="SearchTerm"
           value="@Model.CPF"
           placeholder="Digite o CPF ou CNS do paciente"
           hx-get="@Url.Page("/Prontuario/Cadastro", "BuscarSugestoes")"
           hx-trigger="keyup changed delay:300ms"
           hx-target="#sugestoes-cpf"
           hx-swap="innerHTML"
           autocomplete="off"
           required
           hx-swap-oob="outerHTML" />
}

<!--class="hidden"-->
<section class="card-prontuario" id="dados-paciente">
    <div class="card-header">
        <h2>Paciente Localizado</h2>
    </div>
    <div class="card-body info-paciente">
        <div><strong>Nome:</strong> @Model.Nome </div>
        <div><strong>Data de Nasc.:</strong> @Model.DataNascimento </div>
        <div><strong>CPF:</strong> @Model.CPF </div>
    </div>
</section>

<section id="adicionar-registro">
    <h2>Adicionar Nova Informação</h2>
    <form>
        <div class="form-group">
            <label for="tipo-registro">Selecione o tipo de registro</label>
            <select id="tipo-registro" name="tipo-registro">
                <option value="consulta" selected>Nova Consulta</option>
                <option value="vacina">Nova Vacina</option>
                <option value="internacao">Nova Internação</option>
                <option value="alergia">Nova Alergia</option>
            </select>
        </div>

        <!-- Formulário de Nova Consulta (visível por padrão) -->
        <fieldset id="form-nova-consulta">
            <legend>Dados da Consulta</legend>
            <div class="form-grid">
                <div class="form-group">
                    <label for="data-consulta">Data</label>
                    <input type="date" id="data-consulta" name="data-consulta">
                </div>
                <div class="form-group">
                    <label for="especialidade">Especialidade</label>
                    <input type="text" id="especialidade" name="especialidade">
                </div>
                <div class="form-group full-width">
                    <label for="resumo-consulta">Resumo / Anotações</label>
                    <textarea id="resumo-consulta" name="resumo-consulta" rows="5"></textarea>
                </div>
            </div>
        </fieldset>

        <!-- Formulário de Nova Vacina (oculto) -->
        <fieldset id="form-nova-vacina">
            <!--class="hidden"-->
            <legend>Dados da Vacina</legend>
            <div class="form-grid">
                <div class="form-group">
                    <label for="nome-vacina">Nome da Vacina</label>
                    <input type="text" id="nome-vacina" name="nome-vacina">
                </div>
                <div class="form-group">
                    <label for="dose-vacina">Dose</label>
                    <input type="text" id="dose-vacina" name="dose-vacina" placeholder="Ex: 1ª Dose, Dose Única">
                </div>
                <div class="form-group">
                    <label for="data-vacina">Data de Aplicação</label>
                    <input type="date" id="data-vacina" name="data-vacina">
                </div>
            </div>
        </fieldset>

        <!-- Formulário de Nova Internação (oculto) -->
        <fieldset id="form-nova-internacao">
            <!--class="hidden"-->
            <legend>Dados da Internação</legend>
            <div class="form-grid">
                <div class="form-group">
                    <label for="data-entrada-internacao">Data de Entrada</label>
                    <input type="date" id="data-entrada-internacao" name="data-entrada-internacao">
                </div>
                <div class="form-group">
                    <label for="data-saida-internacao">Data de Saída</label>
                    <input type="date" id="data-saida-internacao" name="data-saida-internacao">
                </div>
                <div class="form-group full-width">
                    <label for="hospital-internacao">Hospital</label>
                    <input type="text" id="hospital-internacao" name="hospital-internacao">
                </div>
                <div class="form-group full-width">
                    <label for="motivo-internacao">Motivo da Internação</label>
                    <textarea id="motivo-internacao" name="motivo-internacao" rows="4"></textarea>
                </div>
            </div>
        </fieldset>

        <!-- Formulário de Nova Alergia (oculto) -->
        <fieldset id="form-nova-alergia">
            <!--class="hidden"-->
            <legend>Dados da Alergia</legend>
            <div class="form-grid">
                <div class="form-group full-width">
                    <label for="descricao-alergia">Descrição da Alergia</label>
                    <input type="text" id="descricao-alergia" name="descricao-alergia" placeholder="Ex: Penicilina, Frutos do mar">
                </div>
            </div>
        </fieldset>

        <button type="submit" class="btn-salvar">Salvar Registro</button>
    </form>
</section>