<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Hospitalzinho"
                   namespace="Hospitalzinho.Entidades">

	<class name="Paciente" table="paciente" lazy="false">

		<id name="Id" column="id" type="long">
			<generator class="sequence">
				<param name="sequence">seq_paciente</param>
			</generator>
		</id>

		<property name="Nome" column="nome" type="string" not-null="true" />
		<property name="CNS" column="cns" type="string" not-null="true" unique="true" />
		<property name="Cpf" column="cpf" type="string" not-null="true" unique="true" />

		<property name="DataNascimento" column="data_nascimento" type="DateTime" not-null="false" />

		<property name="NomePai" column="nome_pai" type="string" not-null="false" />
		<property name="NomeMae" column="nome_mae" type="string" not-null="false" />
		<property name="CpfPai" column="cpf_pai" type="string" not-null="false" />
		<property name="CpfMae" column="cpf_mae" type="string" not-null="false" />

		<property name="Ativo" column="ativo" type="Boolean" not-null="true" />

		<!-- Enums mapeados como inteiros -->
		<property name="Sexo" column="sexo" not-null="false" />
		<property name="Raca" column="raca"  not-null="false" />
		<property name="Escolaridade" column="escolaridade" not-null="false" />

		<property name="Nacionalidade" column="nacionalidade" type="string" not-null="false" />
		<property name="Naturalidade" column="naturalidade" type="string" not-null="false" />

		<property name="CriadoEm" column="data_cadastro" type="DateTime" not-null="true" />
		<property name="UltimaAlteracao" column="data_atualizacao" type="DateTime" not-null="true" />

		<one-to-one name="Prontuario" class="PacienteProntuario" property-ref="Paciente" cascade="all" />

		<bag name="Contatos" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id" />
			<one-to-many class="PacienteContato" />
		</bag>

		<bag name="Enderecos" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id" />
			<one-to-many class="PacienteEndereco" />
		</bag>

		<bag name="Convenios" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id" />
			<one-to-many class="PacienteConvenio" />
		</bag>

	</class>
</hibernate-mapping>
