<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Hospitalzinho"
                   namespace="Hospitalzinho.Entidades">

	<class name="Paciente" table="paciente" lazy="false">

		<id name="Id" column="id" type="long">
			<generator class="sequence">
				<param name="sequence">seq_paciente</param>
			</generator>
		</id>

		<property name="Nome" column="nome" not-null="true" />
		<property name="CNS" column="cns" not-null="true" />
		<property name="Cpf" column="cpf" />
		<property name="DataNascimento" column="data_nascimento" />
		<property name="NomePai" column="nome_pai" />
		<property name="NomeMae" column="nome_mae" />
		<property name="CpfPai" column="cpf_pai" />
		<property name="CpfMae" column="cpf_mae" />
		<property name="Ativo" column="ativo" not-null="true" />

		<!-- Enums mapeados como Int32 -->
		<property name="Sexo" column="sexo" type="NHibernate.Type.EnumType`1[[Hospitalzinho.Enum.SexoPaciente, Hospitalzinho]]" not-null="false"/>
		<property name="Raca" column="raca" type="NHibernate.Type.EnumType`1[[Hospitalzinho.Enum.RacaPaciente, Hospitalzinho]]" not-null="false"/>
		<property name="Escolaridade" column="escolaridade" type="NHibernate.Type.EnumType`1[[Hospitalzinho.Enum.EscolaridadePaciente, Hospitalzinho]]" not-null="false"/>


		<property name="Nacionalidade" column="nacionalidade" />
		<property name="Naturalidade" column="naturalidade" />

		<property name="CriadoEm" column="data_cadastro" not-null="true" />
		<property name="UltimaAlteracao" column="data_atualizacao" not-null="true" />

		<one-to-one name="Prontuario" class="PacienteProntuario" property-ref="Paciente" cascade="all" />

		<bag name="Contatos" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id"/>
			<one-to-many class="PacienteContato"/>
		</bag>

		<bag name="Enderecos" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id"/>
			<one-to-many class="PacienteEndereco"/>
		</bag>

		<bag name="Convenios" cascade="all-delete-orphan" inverse="true">
			<key column="paciente_id"/>
			<one-to-many class="PacienteConvenio"/>
		</bag>

	</class>
</hibernate-mapping>
